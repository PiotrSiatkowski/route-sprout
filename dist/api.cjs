"use strict";var f=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var N=Object.getOwnPropertyNames;var P=Object.prototype.hasOwnProperty;var w=(t,e)=>{for(var a in e)f(t,a,{get:e[a],enumerable:!0})},b=(t,e,a,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of N(e))!P.call(t,s)&&s!==a&&f(t,s,{get:()=>e[s],enumerable:!(r=y(e,s))||r.enumerable});return t};var D=t=>b(f({},"__esModule",{value:!0}),t);var $={};w($,{keep:()=>R,path:()=>p,root:()=>F,slot:()=>k,wrap:()=>x});module.exports=D($);var g=t=>t.replace(/-([a-zA-Z0-9])/g,(e,a)=>a.toUpperCase()),R=()=>({kind:"keep"}),p=(t,e)=>({kind:"path",name:S("path",t),uuid:g(t),rest:e??[]}),k=(t,e)=>({kind:"slot",name:S("slot",t),uuid:g(t),rest:e??[]}),x=(t,e,a)=>({kind:"wrap",name:S("wrap",t),uuid:g(t),when:e,rest:a??[]}),K=/^[A-Za-z_][A-Za-z0-9_]*$/;function S(t,e){if(t==="path"&&e==="")return e.trim();if(!e)throw new Error(`${t} name cannot be empty`);if(!K.test(e))throw new Error(`${t} name "${e}" must be a valid identifier (letters/digits/_/$, not starting with a digit).`);return e.trim()}var m=(t,e)=>`/${t.filter(Boolean).join("/").replace("//{2,}/g","/")}${e?`?${e}`:""}`;function F(t){return u([],p("",t))}function u(t,e){let a=n=>n.rest.some(o=>o.kind==="keep"),r=e.kind==="slot"||e.kind==="wrap"?t:e.uuid?[...t,e.uuid]:t,s=a(e)?n=>m(r,n):Object.create(null);for(let n of e.rest)if(n.kind==="slot")n.rest.length===0?s[n.uuid]=o=>{let l=[...r,o];return c(d=>m(l,d),l,[])}:s[n.uuid]=o=>{let l=u([...r,o],n);return Object.assign(a(n)?i=>m([...r,o],i):Object.create(null),l)};else if(n.kind==="path")if(n.rest.length===0){let o=[...r,n.uuid],l=i=>m(o,i);s[n.uuid]=c(l,o,[])}else s[n.uuid]=u(r,n);else n.kind==="wrap"&&(s[n.uuid]=o=>{let i=n.when(o)?[...r,n.uuid]:r,d=u(i,n);return Object.assign(a(n)?h=>m(i,h):Object.create(null),d)});return c(s,r,e.rest)}function c(t,e,a){let r=(s,n)=>{let o=s?[...e,...Array.isArray(n)?n:[n]]:e;return a.length===0&&typeof t=="function"?c(i=>m(o,i),o,a):u(o,p("",a))};return t.$when=r,t.$join=s=>r(!0,s),t}0&&(module.exports={keep,path,root,slot,wrap});
//# sourceMappingURL=api.cjs.map