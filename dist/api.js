var u=()=>({kind:"keep"}),d=(t,n)=>({kind:"path",name:t,rest:n??[]}),h=(t,n)=>({kind:"slot",name:t,rest:n??[]}),y=(t,n,r)=>({kind:"wrap",name:t,when:n,rest:r??[]}),l=(t,n)=>`${t.filter(Boolean).join("/")}${n?`?${n}`:""}`.replace("//","/");function g(t){return m([],d("/",t))}function m(t,n){let r=e=>e.rest.some(o=>o.kind==="keep"),s=n.kind==="slot"||n.kind==="wrap"?t:n.name?[...t,n.name]:t,a=r(n)?e=>l(s,e):{};for(let e of n.rest)e.kind==="slot"?e.rest.length===0?a[e.name]=o=>i=>l([...s,o],i):a[e.name]=o=>{let i=m([...s,o],e);return Object.assign(r(e)?c=>l([...s,o],c):{},i)}:e.kind==="path"?e.rest.length===0?a[e.name]=o=>l([...s,e.name],o):a[e.name]=m(s,e):e.kind==="wrap"&&(a[e.name]=o=>{let c=e.when(o)?[...s,e.name]:s,S=m(c,e);return Object.assign(r(e)?p=>l(c,p):{},S)});return f(a,s,n.rest)}function f(t,n,r){return t.when=(s,a)=>m(s?[...n,...Array.isArray(a)?a:[a]]:n,d("",r)),t.join=s=>m([...n,...Array.isArray(s)?s:[s]],d("",r)),t}export{u as keep,d as path,g as root,h as slot,y as wrap};
//# sourceMappingURL=api.js.map